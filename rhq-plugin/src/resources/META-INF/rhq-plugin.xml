<?xml version="1.0"?>

<!DOCTYPE plugin [

<!ENTITY enginePluginConfig '
	<plugin-configuration>
		<c:simple-property name="jmxurl" default="service:jmx:rmi:///jndi/rmi://localhost:1090/jmxrmi" description="The URL for contacting the JMX listener running on the monitored server" readOnly="false"/>
		<c:simple-property name="key" default="TxnEngine1" readOnly="true"/>
		<c:simple-property name="name" default="Transaction Engine" readOnly="false"/>
		<c:simple-property name="version" default="0.1" readOnly="true"/>
		<c:simple-property name="description" default="JBossTS Transaction System Management" readOnly="false"/>
	</plugin-configuration>
'>
<!ENTITY objStorePluginConfig '
	<plugin-configuration>
		<c:simple-property name="key" default="TxnLog1" readOnly="true"/>
		<c:simple-property name="name" default="Transaction Log" readOnly="false"/>
		<c:simple-property name="version" default="0.1" readOnly="true"/>
		<c:simple-property name="description" default="Transaction Logging: Transactions that have been prepared will appear as services below this entry and are removed once they successfully complete." readOnly="false"/>
	</plugin-configuration>
'>

<!ENTITY txnEntryPluginConfig '
	<plugin-configuration>
		<c:simple-property name="version" default="0.1" readOnly="true"/>
		<c:simple-property name="description" default="A Terminating Transaction" readOnly="false"/>
	</plugin-configuration>
'>

<!ENTITY txnParticipantPluginConfig '
	<plugin-configuration>
		<c:simple-property name="version" default="0.1" readOnly="true"/>
		<c:simple-property name="description" default="A transaction participant (such as a database or a JMS queue)" readOnly="false"/>
	</plugin-configuration>
'>

<!ENTITY globalResourceConfiguration '
	<resource-configuration>

		<c:group name="CommonConfiguration" displayName="Common Configuration Options">
			<c:simple-property name="EnableStatistics" description="Set to true to start recording transaction statistics. Note that enabling statistics may have a slight performance impact due to locking on the counter variables." displayName="Enable Transaction Statistics" required="true" readOnly="false"/>
			<c:simple-property name="DefaultTimeout" description="The default interval after which a transaction may be considered for timeout, in seconds.  Note: depending on the reaper mode and workload, transactions may not be timed out immediately." displayName="DefaultTimeout" required="true" readOnly="false"/>

			<c:simple-property name="AllowMultipleLastResources" description="True if multiple last (i.e. one-phase) resources are allowed in the same transaction or not." displayName="Allow Multiple Last Resources" required="true" readOnly="false"/>
			<c:simple-property name="DisableMultipleLastResourcesWarning" description="True if the per-transaction warning on enlistment of multiple last resources is disabled or not." displayName="Disable Multiple Last Resources Warning" required="true" readOnly="false"/>
			<c:simple-property name="BuildVersion" description="The version control tag of the source used" displayName="Build Version"  required="false" readOnly="true"/>
			<c:simple-property name="BuildId" description=" The build identification line indicating the os name and version and build date" displayName="Build Id"  required="false" readOnly="true"/>

		</c:group>

		<c:group name="EngineConfiguration" displayName="Transaction Manager Options" hiddenByDefault="true">
			<c:simple-property name="XaRollbackOptimization" description="True if connections associated to XAResources that fail during prepare should be cleaned up immediately. False for cleanup during phase two rollback." displayName="XA Rollback Optimization" required="true" readOnly="false"/>
			<c:simple-property name="XaAssumeRecoveryComplete" description="if XAResources that cannot be recovered should be assumed to have completed.  WARNING: enabling this property is not recommended and may cause inconsistency if your recovery configuration is incorrect or resource managers are not available." displayName=" XA Assume Recovery Complete" required="true" readOnly="false"/>
			<c:simple-property name="XaTransactionTimeoutEnabled" description="True if the transaction timeout is passed on to the enlisted XAResources." displayName="XA Transaction Timeout Enabled" required="true" readOnly="false"/>

			<c:simple-property name="SupportSubtransactions" description="True if subtransactions are allowed." displayName="Support Subtransactions" required="true" readOnly="true"/>
<!--
			<c:simple-property name="UserTransactionJNDIContext" description="The JNDI bind name for the implementation of UserTransaction interface." displayName="UserTransaction JNDI Context" required="true" readOnly="false"/>
			<c:simple-property name="TransactionManagerJNDIContext" description="The JNDI bind name for the implementation of TransactionManager interface." displayName="TransactionManager JNDI Context" required="true" readOnly="true"/>
			<c:simple-property name="TransactionSynchronizationRegistryJNDIContext" description="The JNDI bind name for the implementation of TransactionSynchronizationRegistry interface." displayName="TransactionSynchronizationRegistry JNDI Context" required="true" readOnly="true"/>
-->		
		</c:group>

		<c:group name="CoreEngineConfiguration" displayName="Core Transaction Manager" hiddenByDefault="true">
			<c:simple-property name="VarDir" description="The var directory path." displayName="Var Dir" required="false" readOnly="true"/>
			<c:simple-property name="NodeIdentifier" description="The Node Identifier." displayName="Node Identifier" required="false" readOnly="true"/>
			<c:simple-property name="SocketProcessIdPort" description="The port number for the Socket based process id implementation." displayName="Socket ProcessId Port" required="false" readOnly="true"/>
			<c:simple-property name="SocketProcessIdMaxPorts" description="The maximum number of ports to search when looking for one that is free." displayName="Socket ProcessId Max Ports" required="false" readOnly="true"/>
			<c:simple-property name="ProcessImplementation" description="The class name of the Process implementation to use." displayName="Process Implementation" required="false" readOnly="true"/>
			<c:simple-property name="Pid" description="The process id to use if ManualProcessId is selected. Should be uniq across all instances on the same host." displayName="Pid" required="false" readOnly="true"/>

<!-- the following properties have been moved to group name="CommonConfiguration"
    - note that moving properties into other groups may require that the relevant Object Names (the ones that implement the properties being moved) are passed to the implementation
    org.jboss.as.integration.jbossts.jopr.updateResourceConfiguration(ObjectName ... beans)
    - ideally it would be nice to pass the Object Name as part of the simple-property definition

			<c:simple-property name="AllowMultipleLastResources" description="True if multiple last (i.e. one-phase) resources are allowed in the same transaction or not." displayName="Allow Multiple Last Resources" required="false" readOnly="true"/>
			<c:simple-property name="DisableMultipleLastResourcesWarning" description="True if the per-transaction warning on enlistment of multiple last resources is disabled or not." displayName="Disable Multiple Last Resources Warning" required="false" readOnly="true"/>
			<c:simple-property name="BuildVersion" description="The version control tag of the source used" displayName="Build Version"  required="false" readOnly="true"/>
			<c:simple-property name="BuildId" description=" The build identification line indicating the os name and version and build date" displayName="Build Id"  required="false" readOnly="true"/>

-->

<!-- TODO how do you display an array property in the JOPR console? -->
			<c:simple-property name="XaRecoveryNodes" description="The set of node identifiers for which recovery will be performed." displayName="XA Recovery Node Ids" required="false" readOnly="true"/>

		</c:group>

		<c:group name="EngineConfigurationClasses" displayName="Transaction Manager Implementation Options" hiddenByDefault="true">
			<c:simple-property name="LastResourceOptimisationInterface" description="The classname of the marker interface used to indicate a LastResource." displayName="Last Resource Optimisation Interface" required="false" readOnly="true"/>

			<c:simple-property name="TransactionManagerClassName" description="The class name of the javax.transaction.TransactionManager implementation." displayName="TransactionManager Class Name" required="false" readOnly="true"/>
			<c:simple-property name="UserTransactionClassName" displayName="User Transaction Class Name" required="false" readOnly="true"/>
			<c:simple-property name="TransactionSynchronizationRegistryClassName" description="The class name of the javax.transaction.TransactionSynchronizationRegistry implementation." displayName="TransactionSynchronization Registry Class Name" required="false" readOnly="true"/>

			<c:simple-property name="XaResourceMapClassNames" description="The set of XAResourceMap implementation class names used to configure XAException handling." displayName="XA ResourceMap Class Names" required="false" readOnly="true"/>
			<c:simple-property name="XaResourceRecoveryClassNames" description="The set of XAResourceRecovery implementation class names, each of which may have configuration data appended to it." displayName="XA Resource Recovery Class Names" required="false" readOnly="true"/>
			<c:simple-property name="XaResourceOrphanFilterClassNames" description="A list of names of classes that implement XAResourceOrphanFilter." displayName="XA Resource Orphan Filter Class Names" required="false" readOnly="true"/>
		</c:group>

		<c:group name="CoordinatorConfiguration" displayName="Coordinator Options" hiddenByDefault="true">
			<c:simple-property name="BeforeCompletionWhenRollbackOnly" description="True if beforeCompletion should be called on Synchronizations when completing transactions that are marked rollback only." displayName="BeforeCompletionWhenRollbackOnly" required="true" readOnly="false"/>
			<c:simple-property name="ClassicPrepare" description="True is classic prepare handling is enabled, false otherwise." displayName="ClassicPrepare" required="true" readOnly="false"/>
			<c:simple-property name="CommitOnePhase" description="True if one phase commit optimization is to be used." displayName="CommitOnePhase" required="true" readOnly="false"/>
			<!--
			<c:simple-property name="DefaultTimeout" description="The default interval after which a transaction may be considered for timeout, in seconds.  Note: depending on the reaper mode and workload, transactions may not be timed out immediately." displayName="DefaultTimeout" required="true" readOnly="false"/>
			-->
			<!--
			<c:simple-property name="EnableStatistics" description="True if transaction statistics should be recorded.  Note: Enabling statistics may have a slight performance impact due to locking on the counter variables." displayName="EnableStatistics" required="true" readOnly="false"/>
			-->
			<c:simple-property name="MaintainHeuristics" description="True if heuristic outcomes should be recorded." displayName="MaintainHeuristics" required="true" readOnly="false"/>
			<c:simple-property name="ReadonlyOptimisation" description="True if handling of read only resources should be optimized." displayName="ReadonlyOptimisation" required="true" readOnly="false"/>
			<c:simple-property name="SharedTransactionLog" description="True if the transaction log sould be run in shared mode or not." displayName="SharedTransactionLog" required="true" readOnly="false"/>
			<c:simple-property name="StartDisabled" description="True if the transaction manager should be created in a disabled state or not." displayName="StartDisabled" required="true" readOnly="false"/>
			<c:simple-property name="TransactionLog" description="True if the transaction log should be distinct from the action store." displayName="TransactionLog" required="true" readOnly="true"/>
			<c:simple-property name="TransactionStatusManagerEnable" description="True if the transaction status manager (TSM) service, needed for out of process recovery, should be provided or not." displayName="TransactionStatusManagerEnable" required="true" readOnly="true"/>
			<c:simple-property name="TxReaperCancelFailWaitPeriod" description="The number of millisecs delay afer a worker thread is interrupted, before the reaper writes the it off as a zombie and starts a new thread." displayName="TxReaperCancelFailWaitPeriod" required="true" readOnly="true"/>
			<c:simple-property name="TxReaperCancelWaitPeriod" description="The number of millisecs delay afer a cancel is scheduled, before the reaper tries to interrupt the worker thread executing the cancel." displayName="TxReaperCancelWaitPeriod" required="true" readOnly="true"/>
			<c:simple-property name="TxReaperTimeout" description="The timeout (wakeup) interval of the reapers PERIODIC mode, in milliseconds." displayName="TxReaperMode" required="true" readOnly="true"/>
			<c:simple-property name="TxReaperTimeout" displayName="TxReaperTimeout" required="true" readOnly="true"/>
			<c:simple-property name="TxReaperZombieMax" description="The threshold for count of non-exited zombies at which the system starts logging error messages." displayName="TxReaperZombieMax" required="true" readOnly="true"/>
			<c:simple-property name="WriteOptimisation" description="True if write optimisation is enabled, false otherwise." displayName="WriteOptimisation" required="true" readOnly="true"/>
			<c:simple-property name="CheckedActionFactoryClassName" description="The class name of an implementation of CheckedActionFactory" displayName="CheckedActionFactoryClassName" required="true" readOnly="true"/>
			<c:simple-property name="AlternativeRecordOrdering" description="Whether to use the alternative abstract record ordering. True if order abstract records on type first, or false if order on Uid first." displayName="Use alterntate record ordering" required="false" readOnly="true"/>

			<c:simple-property name="ActionStore" description="The symbolic name for the action store type." displayName="Action Store" required="true" readOnly="true"/>
			<c:simple-property name="AsyncCommit" description="True if anynchronous commit behaviour is enabled." displayName="Async Commit" required="true" readOnly="true"/>
			<c:simple-property name="AsyncPrepare" description="True if asynchronous prepare behaviour is enabled." displayName="Async Prepare" required="true" readOnly="true"/>
			<c:simple-property name="AsyncRollback" description="True if asynchronous rollback behaviour is enabled." displayName="Async Rollback" required="true" readOnly="true"/>
		</c:group>

		<c:group name="RecoveryConfiguration" displayName="Recovery System" hiddenByDefault="true">

			<c:simple-property name="PeriodicRecoveryPeriod" description="The interval between recovery scans, in seconds." displayName="PeriodicRecoveryPeriod" required="true" readOnly="false"/>
			<c:simple-property name="RecoveryBackoffPeriod" description="The interval between recovery phases within a recovery scan, in seconds." displayName="RecoveryBackoffPeriod" required="true" readOnly="false"/>
			<c:simple-property name="RecoveryListener" description="True if the recovery system should listen on a network socket. False for local JVM only use." displayName="RecoveryListener" required="true" readOnly="false"/>
			<c:simple-property name="RecoveryPort" description="The network port number on which the recovery listener should bind." displayName="RecoveryPort" required="true" readOnly="false"/>
			<c:simple-property name="RecoveryAddress" description="The hostname on which the recovery listener shoud bind." displayName="RecoveryAddress" required="true" readOnly="false"/>
			<c:simple-property name="TransactionStatusManagerPort" description="The network port number on which the transaction status manager should bind." displayName="TransactionStatusManagerPort" required="true" readOnly="false"/>
			<c:simple-property name="TransactionStatusManagerAddress" description="The hostname on which the transaction status manager should bind." displayName="TransactionStatusManagerAddress" required="true" readOnly="false"/>
			<c:simple-property name="ExpiryScanInterval" description="The interval on which the ObjectStore will be scanned for expired items, in hours." displayName="ExpiryScanInterval" required="true" readOnly="false"/>
			<c:simple-property name="TransactionStatusManagerExpiryTime" description="The time period after which items will be considered to have expired, in hours." displayName="TimeoutSocket" required="true" readOnly="false"/>
			<c:simple-property name="TimeoutSocket" description="True if SO_TIMEOUT should be set on Listener socket instances." displayName="TimeoutSocket" required="true" readOnly="false"/>

<!-- List<String> -->
			<c:simple-property name="ExpiryScanners" description="A list of names of classes that implement ExpiryScanner." displayName="ExpiryScanners" required="false" readOnly="true"/>
			<c:simple-property name="RecoveryExtensions" description="A list of names of classes that implement RecoveryModule." displayName="RecoveryExtensions" required="false" readOnly="true"/>
			<c:simple-property name="RecoveryActivators" description="A list of names of classes that implement RecoveryActivator." displayName="RecoveryActivators" required="false" readOnly="true"/>

		</c:group>

		<c:group name="JDBCConfiguration" hiddenByDefault="true" displayName="JDBC Configuration">
			<c:simple-property name="IsolationLevel" description="The default isolation level for tansactional database operations." displayName="Isolation Level" required="false" readOnly="true"/>
		</c:group>

	<c:group name="JTSConfiguration" displayName="JTS Configuration" hiddenByDefault="true">

		<c:simple-property name="UserTransactionClassName" description="The class name of the javax.transaction.UserTransaction implementation." displayName="TransactionManager"  required="false" readOnly="true"/>
		<c:simple-property name="NeedTranContext" description="True if transaction context interceptors will require a context to be present." displayName="NeedTranContext"  required="false" readOnly="true"/>
		<c:simple-property name="AlwaysPropagateContext" description="True if a transaction context should always be propagated on remote calls. False to propagate selectively." displayName="AlwaysPropagateContext"  required="false" readOnly="true"/>
		<c:simple-property name="Interposition" description="The Xid format interposition strategy implementation class name." displayName="Interposition"  required="false" readOnly="true"/>
		<c:simple-property name="CheckedTransactions" description="True if checked transactions should be used." displayName="CheckedTransactions"  required="false" readOnly="true"/>
		<c:simple-property name="SupportSubtransactions" description="True if subtransactions should be used in the JTS. Note that this is distinct from the JTA module subtransaction option." displayName="SupportSubtransactions"  required="false" readOnly="true"/>
		<c:simple-property name="SupportRollbackSync" description="True if Synchronizations should be fired on transaction rollback. Note: this is distinct from the coordinators beforeCompletionWhenRollbackOnly option." displayName="SupportRollbackSync"  required="false" readOnly="true"/>
		<c:simple-property name="SupportInterposedSynchronization" description="True if Synchronizations can be interposed i.e. registered direct with the parent coordinator." displayName="SupportInterposedSynchronization"  required="false" readOnly="true"/>
		<c:simple-property name="PropagateTerminator" description="True if a reference to the terminator should be included in the propagation context." displayName="PropagateTerminator"  required="false" readOnly="true"/>
		<c:simple-property name="ContextPropMode" description="The name of the context propagation mode (CONTEXT or NONE)." displayName="ContextPropMode"  required="false" readOnly="true"/>
		<c:simple-property name="RecoveryManagerPort" description="The port number on which the recovery manager will listen." displayName="RecoveryManagerPort"  required="false" readOnly="true"/>
		<c:simple-property name="RecoveryManagerAddress" description="The hostname on which the recovery manager will bind." displayName="RecoveryManagerAddress"  required="false" readOnly="true"/>
		<c:simple-property name="TimeoutPropagation" description="True if the timeout value sent should be the time remaining or not. true for OTS 1.2 (time remaining), false for backwards compatible (total time)" displayName="TimeoutPropagation"  required="false" readOnly="true"/>
		<c:simple-property name="IssueRecoveryRollback" description="True if resources will have rollback invoked explicitly on them by recovery." displayName="IssueRecoveryRollback"  required="false" readOnly="true"/>
		<c:simple-property name="CommitedTransactionRetryLimit" description="The number of attempts to make to notify resources of a transaction commit during recovery." displayName="CommitedTransactionRetryLimit"  required="false" readOnly="true"/>

	</c:group>

	<c:group name="OrbPortabilityConfiguration" displayName="Orb Portability Layer Configuration" hiddenByDefault="true">
		<c:simple-property name="InitialReferencesRoot" description="The name of the directory in which the initial reference file is stored." displayName="Initial References Root"  required="false" readOnly="true"/>
		<c:simple-property name="InitialReferencesFile" description="The relative name of the file in which initial references are stored." displayName="Initial References File"  required="false" readOnly="true"/>
		<c:simple-property name="FileDir" description="The name of the directory to store reference files in." displayName="File Directory"  required="false" readOnly="true"/>
		<c:simple-property name="ResolveService" description="The symbolic name of the configuration mechanism for resolving service references." displayName="Resolve Service"  required="false" readOnly="true"/>
		<!--
		     <c:simple-property name="EventHandlers" description="The classnames for the ORB object connect/disconnect event handlers." displayName="Event Handlers"  required="false" readOnly="true"/>
	     -->
		<c:simple-property name="OrbImplementation" description="The classname of the ORBImple implementation." displayName="Orb Implementation"  required="false" readOnly="true"/>
		<c:simple-property name="OaImplementation" description="The classname of the POAImple implementation." displayName="Oa Implementation"  required="false" readOnly="true"/>
		<c:simple-property name="BindMechanism" description="The symbolic name of the configuration mechanism used for service bindings." displayName="Bind Mechanism"  required="false" readOnly="true"/>
		<!--
		     <c:simple-property name="String> OrbInitializationProperties" description="The Map used for the orb initialization parameters. As there are potentially an arbitrary number of ORBs, each with an arbitrary set of initialization classes, it is not well suited to bean based properties." displayName="Orb Initialization Properties"  required="false" readOnly="true"/>
     -->

	</c:group>

	</resource-configuration>
'>

<!ENTITY generalTraits '
	<metric property="BuildId"
			displayName="Sofware build identification"
			description="Indication of who built the release, on which date and on which machine"
			dataType="trait" displayType="summary"/>
	<metric property="BuildVersion"
			displayName="Source code version control tag"
			description="The version control tag of the source used for this build"
			dataType="trait" displayType="summary"/>
'>

<!ENTITY txStatsMetrics '
	<metric property="NumberOfTransactions"
			displayName="NumberOfTransactions"
			description="the total number of transactions (top-level and nested) created since last restart"
			displayType="summary"
			defaultOn="true"
			defaultInterval="10000"
			measurementType="trendsup" dataType="measurement"/>
<!--
	<metric property="numberOfTransactions"
			category="utilization"
			measurementType="trendsup"/>
-->
	<metric property="NumberOfNestedTransactions"
			displayName="NumberOfNestedTransactions"
			description="the total number of nested (sub) transactions created"
			measurementType="trendsup" dataType="measurement" displayType="summary"/>

	<metric property="NumberOfHeuristics"
			displayName="NumberOfHeuristics"
			description="the number of transactions which have terminated with heuristic outcomes"
			measurementType="trendsup" dataType="measurement" displayType="summary"/>

	<metric property="NumberOfCommittedTransactions"
			displayName="NumberOfCommittedTransactions"
			description="the number of committed transactions"
			measurementType="trendsup" dataType="measurement" displayType="summary"/>

	<metric property="NumberOfAbortedTransactions"
			displayName="NumberOfAbortedTransactions"
			description="the number of aborted (i.e. rolledback) transactions"
			measurementType="trendsup" dataType="measurement" displayType="summary"/>

	<metric property="NumberOfInflightTransactions"
			displayName="NumberOfInflightTransactions"
			description="the number of transactions that have begun but not yet terminated"
			measurementType="trendsup" dataType="measurement" displayType="summary"/>

	<metric property="NumberOfTimedOutTransactions"
			displayName="NumberOfTimedOutTransactions"
			description="the number of transactions that have rolled back due to timeout"
			measurementType="trendsup" dataType="measurement" displayType="summary"/>

	<metric property="NumberOfApplicationRollbacks"
			displayName="NumberOfApplicationRollbacks"
			description="the number of transactions that have been rolled back by application request (including ones that have timed out)"
			measurementType="trendsup" dataType="measurement" displayType="summary"/>

	<metric property="NumberOfResourceRollbacks"
			displayName="NumberOfResourceRollbacks"
			description="the number of transactions that rolled back due to resource (participant) failure"
			measurementType="trendsup" dataType="measurement" displayType="summary"/>
'>

<!ENTITY objStoreConfiguration '
	<resource-configuration>
		<c:group name="ObjStoreConfiguration" displayName="Transaction Log Configuration">
			<c:simple-property name="ObjectStoreDir" description="The filesystem location of the ObjectStore" displayName="ObjectStore Directory" readOnly="true"/>
			<c:simple-property name="ObjectStoreType" description="The type of the ObjectStore" displayName="ObjectStore Type" readOnly="true"/>
			<c:simple-property name="LocalOSRoot" description="The local ObjectStore root directory name. This should be a path element, not a complete path." displayName="Local OS Root" readOnly="true"/>
			<c:simple-property name="ObjectStoreSync" description="True if ObjectStore operations should be synched to disk. Note that this value may be overridden by store implementation specific configuration. See also: TransactionSync" displayName="ObjectStore Sync" readOnly="true"/>
			<c:simple-property name="TransactionSync" description="True if transaction log operations should be synched to disk or not. Caution: Disabling this may be lead to non-ACID transaction behaviour." displayName="Transaction Sync" readOnly="true"/>
			<c:simple-property name="HashedDirectories" description="The number of directories over which the ObjectStore contents will be distributed. Splitting the contents is important for performance on some file systems, as it reduces chain length ie the number of items in a directory, and directory lock contention." displayName="Number of Hashed Directories" readOnly="true"/>
			<c:simple-property name="Share" description="The share mode for the ObjectStore, i.e., is this being shared  between VMs? For definition of the values @see com.arjuna.ats.arjuna.objectstore.StateStatus.stateStatusString()" displayName="Share" readOnly="true"/>
			<c:simple-property name="HierarchyRetry" description="The maximum number of attempts which may be made to create a file path in the store." displayName="HierarchyRetry" readOnly="true"/>
			<c:simple-property name="HierarchyTimeout" description="The time in milliseconds to wait between file creation retries." displayName="Hierarchy Timeout" readOnly="true"/>
		</c:group>

	</resource-configuration>
'>

<!ENTITY objStoreEntryMetrics '

	<metric property="CreationTime"
		displayName="CreationTime"
		description="Time when the txn was prepared"
		dataType="trait" displayType="summary"/>
	<metric property="AgeInSeconds"
		displayName="AgeInSeconds"
		description="The elapsed time since prepare was called on this transaction"
		units="seconds"
		measurementType="trendsup" dataType="measurement" displayType="summary"/>

'>

<!ENTITY participantMetrics '
	<metric property="Status"
		displayName="Status"
		description="Reports the commitment status of this participant (can be one of Pending, Prepared, Failed, Heuristic or Readonly)"
		dataType="trait" displayType="summary"/>
	<metric property="Type"
		displayName="Type"
		description="The record type used for storing this transaction"
		dataType="trait" displayType="detail"/>
	<metric property="ClassName"
		displayName="XA Resource Class Name"
		description="The java type that implements this XAResource"
		dataType="trait" displayType="detail"/>
	<metric property="EisProductName"
		displayName="JNDI Name"
		description="JNDI name of the JCA resource"
		dataType="trait" displayType="summary"/>
	<metric property="EisProductVersion"
		displayName="Product Version"
		description="JCA product version"
		dataType="trait" displayType="summary"/>
	<metric property="Timeout"
		displayName="Timeout"
		description="The number of seconds before the resource can rollback the branch"
		units="seconds" dataType="trait" displayType="detail"/>
 '>

]>

<plugin name="JBossTS"
		displayName="JBossTSPlugin"
		description="Supports management and monitoring of JBossTS transaction managers"
		package="org.jboss.as.integration.jbossts.jopr"
		version="0.1"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xmlns="urn:xmlns:rhq-plugin"
		xmlns:c="urn:xmlns:rhq-configuration">

	<service name="TX Engine"
			 description="Supports management and monitoring of JBossTS transaction managers"
			 discovery="TxnEngineDiscoveryComponent"
			 class="TxnEngineComponent"
			 singleton="true">

		<runs-inside>
			<parent-resource-type name="JBossAS Server" plugin="JBossAS"/>
			<parent-resource-type name="JBossAS Server" plugin="JBossAS5"/>
		</runs-inside>

		&enginePluginConfig;
		&generalTraits;
		&txStatsMetrics;
		&globalResourceConfiguration;

		<service name="Transaction Log"
				 discovery="TxnStoreDiscoveryComponent"
				 class="TxnStoreComponent"
				 singleton="true">
			<!--
			<operation name="refresh" displayName="Find Transactions" description="Resynchronize view of unresolved transactions">
				<results><c:simple-property name="operationResult" type="string" description="Indication of whether there were changes"/></results>
			</operation>
			-->

			&objStorePluginConfig;
			&objStoreConfiguration;

			<service name="Transaction Entries"
					 discovery="TxnEntryDiscoveryComponent"
					 class="TxnEntryComponent"
					 createDeletePolicy="delete-only"
					 singleton="false">

				&txnEntryPluginConfig;
				<operation name="remove" displayName="Remove Transaction" description="Tell the Transaction Manager to remove this action">
					<results><c:simple-property name="operationResult" type="string" description="Indication of whether the transaction was removed"/></results>
				</operation>

				&objStoreEntryMetrics;

				<service name="Transaction Participants"
						 discovery="TxnParticipantDiscoveryComponent"
						 class="TxnParticipantComponent"
						 singleton="false">

					&txnParticipantPluginConfig;

					<operation name="setStatus" displayName="Clear Heuristic" description="Modify the status of this participant. This operation is most useful in
					 those cases where the participant generated a heuristic  outcome and the administrator wants the Transaction manager to re-run phase 2 of
					 the commitment protocol.">
						<parameters>
							<c:simple-property required="true" name="status" displayName="New status">
								<c:property-options>
									<c:option value="PREPARED" default="true"/>
									<c:option value="HEURISTIC"/>
								</c:property-options>
							</c:simple-property>
						</parameters>
						<results><c:simple-property name="operationResult" type="string" description="Indication of whether the status was modified"/></results>
					</operation>

					&participantMetrics;
				</service>
			</service>

		</service>

	</service>

</plugin>
