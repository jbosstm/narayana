<?xml version="1.0" encoding="UTF-8" ?>

<project name="rhq-plugin" default="maven:package" basedir=".">

	<property name="modulename" value="jbossts-jopr-plugin-5.0.0.M1-SNAPSHOT"/>
	<property name="component-module-list" value="${modulename}"/>
	<property name="install.jar.dir" value="../install/bin"/>
	<property name="install.doc.dir" value="../install/docs/rhq"/>
	<import file="../sharedbuild.xml"/>

	<property name="version" value="1.0.0.SNAPSHOT"/>
	<property name="maven.project.build.directory" value="${basedir}/target"/>
	<property name="pluginjar" value="${modulename}.jar"/>
	<property name="pluginsrcjar" value="${modulename}-sources.jar"/>
	<property name="plugindocjar" value="${modulename}-javadoc.jar"/>

	<target name="maven:package" depends="clean">
		<exec executable="mvn" dir="${basedir}">
			<arg value="-Dversion=${version}"/>
			<arg value="-DartifactId=${modulename}"/>
			<arg value="-DTS_EMMA_JAR=/"/>
			<arg value="package"/>
		</exec>
	</target>

	<target name="dist" depends="maven:package">
		<copy file="${maven.project.build.directory}/${pluginjar}" tofile="${install.jar.dir}/jbossts-jopr-plugin.jar"/>
		<copy file="${maven.project.build.directory}/${pluginsrcjar}" tofile="${install.jar.dir}/jbossts-jopr-plugin-sources.jar"/>
		<copy file="${maven.project.build.directory}/${plugindocjar}" tofile="${install.doc.dir}/jbossts-jopr-plugin-javadoc.jar"/>
	</target>

	<target name="clean">
		<delete dir="target"/>

		<delete dir="build"/>
		<delete dir="${install.doc.dir}"/>
		<echo message="deleting ${install.jar.dir}/${pluginjar} and ${install.jar.dir}/${pluginsrcjar}"/>
		<delete file="${install.jar.dir}/${pluginjar}"/>
		<delete file="${install.jar.dir}/${pluginsrcjar}"/>
	</target>
</project> 
