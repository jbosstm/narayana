<!--
  JBoss, Home of Professional Open Source
  Copyright 2006, Red Hat Middleware LLC, and individual contributors 
  as indicated by the @author tags. 
  See the copyright.txt in the distribution for a
  full listing of individual contributors. 
  This copyrighted material is made available to anyone wishing to use,
  modify, copy, or redistribute it subject to the terms and conditions
  of the GNU Lesser General Public License, v. 2.1.
  This program is distributed in the hope that it will be useful, but WITHOUT A 
  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A 
  PARTICULAR PURPOSE.  See the GNU Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General Public License,
  v.2.1 along with this distribution; if not, write to the Free Software
  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, 
  MA  02110-1301, USA.
  
  (C) 2005-2006,
  @author JBoss Inc.
-->
<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.7 [en-gb] (WinNT; I) [Netscape]">
   <title>How does it work</title>
</head>
<body>

<h2>
3. How does the CLF work?</h2>
Applications make logging calls on commonLogger objects. These commonLogger
objects pass log messages to Handler for publication. Both commonLoggers
and Handlers may use logging Levels to decide if they are interested in
a particular log message. Since a commonLogger object is tied with an underlying
logger tool, such a category or a channel according to the underlying logging
service, the Handler responsible to manage the output is also tied with
the respective mechanism managing the output as defined by the same underlying
logging service such an Appender or a LogWriter. That is a Handler can
use appropriate mechanism to format and localize a log message before publishing
it to the output.
<br>&nbsp;
<table CELLSPACING=0 CELLPADDING=0 >
<tr>
<td WIDTH="50" HEIGHT="0"></td>
</tr>

<tr>
<td></td>

<td><img SRC="image002.gif" v:shapes="_x0000_s1026" height=192 width=564></td>
</tr>
</table>

<h3>
<a NAME="3.1 commonLogger, LoggerFactory and LogManager"></a>3.1 commonLogger,
LoggerFactory and LogManager</h3>
<i><a href="../../htdocs/com/hp/mw/common/util/logging/commonLogger.html">commonLogger</a></i>
objects are provided by a <i><a href="../../htdocs/com/hp/mw/common/util/logging/LoggerFactory.html">LoggerFactory</a></i>
object, which hides the type of the underlying logging implementation.
The
<i><a href="../../htdocs/com/hp/mw/common/util/logging/LogManager.html">LogManager</a></i>
is responsible to create a LoggerFactory appropriate to an&nbsp; underlying
logging implementation. For this aim, the <i>LogManager</i> uses the property
named&nbsp; "<i><u>com.hp.mw.common.utils.logging.factory</u></i>", to
determine the underlying class that shall be loaded to create commonLogger
objects. The classes provided by this distribution are:
<ul>
<li>
&nbsp;<i>com.hp.mwlabs.common.util.logging.log4j.ArjLoggerFactory </i>(<b>Default
class</b>). This class allows to build log4j logger objects.</li>

<li>
<i>com.hp.mwlabs.common.util.logging.csf.ArjChannelFactory</i>. This class
allows to build logger objects specific to the HP logging API mainly used
by the HP CSF framework.</li>

<li>
<i>com.hp.mwlabs.common.util.logging.simpleLog.ArjSimpleLoggerFactory</i>
. This class allows to build simple commonLogger objects if an underlying
logging tool is not provided.</li>
</ul>
The way to provide the classname, identifying the LoggerFactory to use,
allows defining new logging services without rebuilding the Common Logging
Framework. The following example illustrates how a LoggerFactory object
and a commonLogger object are created:
<br>&nbsp;
<center><table BORDER COLS=1 WIDTH="81%" BGCOLOR="#CCCCCC" >
<tr>
<td><font face="Courier New,Courier"><font size=-1>import com.hp.mw.common.util.logging.LogManager;</font></font>
<br><font face="Courier New,Courier"><font size=-1>import com.hp.mw.common.util.logging.LoggerFactory;</font></font>
<br><font face="Courier New,Courier"><font size=-1>import com.hp.mw.common.util.logging.commonLogger;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp; ..</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; static LoggerFactory
log_fac = LogManager.getLogFactory();</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; static commonLogger
mylogger = (commonLogger)log_fac.getLogger("TestLogLevels");</font></font></td>
</tr>
</table></center>

<p>An application can be executed as follows where the property specifying
the underlying logging service is provided:
<blockquote><font face="Courier New,Courier"><font size=-1>&nbsp;java –Dcom.hp.mw.common.utils.logging.factory
=&lt;log_classname> MyApplicati</font></font>on</blockquote>
Where &lt;log_classname> may have one of the values described above or
any class that implements the LoggerFactory interface.
<br>Rather that using the Java -D flag, all all properties may be defined
in a <a href="#6.">configuration file</a> used by the CLF.
<h3>
<a NAME="3.2 Logs Levels"></a>3.2&nbsp; Logs Levels</h3>
Each log message has an associated log Level. The Level gives the importance
and urgency of a log message. Log level objects encapsulate an integer
value, with higher values indicating higher priorities.
<p>Similarly <i>commonLogger</i> may be assigned log Levels. The set of
possible Log Levels are <font face="Courier New,Courier">DEBUG, INFO, WARN,
ERROR</font> and <font face="Courier New,Courier">FATAL</font> defined
in the <i><a href="../../htdocs/com/hp/mw/common/util/logging/CommonLevel.html">com.hp.mw.common.util.logging.CommonLevel</a></i>
class. Since Log Levels are assumed to be associated to the underlying
levels or priorities defined by the underlying logging service, they are
defined as static but no final variables in such way that their final values
will be assigned at initialisation by the appropriate <i>LoggerFactory</i>.
<p>The table below describes how is mapped the concept of the Level interface
and the CommonLevel values to the underlying logging service.
<br>&nbsp;
<table BORDER COLS=4 WIDTH="83%" BGCOLOR="#C0C0C0" >
<tr>
<td>
<center><b>Common Logging Framework</b></center>
</td>

<td>
<center><b>Log4j</b></center>
</td>

<td>
<center><b>HP Logging</b></center>
</td>

<td>
<center><b>JDK1.4 Logging API*</b></center>
</td>
</tr>

<tr>
<td>
<center>Level</center>
</td>

<td>
<center>Priority</center>
</td>

<td>
<center>LogLevel</center>
</td>

<td>
<center>Level</center>
</td>
</tr>

<tr>
<td>
<center>FATAL</center>
</td>

<td>
<center>FATAL</center>
</td>

<td>
<center>CRITICAL</center>
</td>

<td>
<center>SEVERE</center>
</td>
</tr>

<tr>
<td>
<center>ERROR</center>
</td>

<td>
<center>ERROR</center>
</td>

<td>
<center>ERROR</center>
</td>

<td>
<center>SEVERE</center>
</td>
</tr>

<tr>
<td>
<center>WARN</center>
</td>

<td>
<center>WARN</center>
</td>

<td>
<center>WARNING</center>
</td>

<td>
<center>WARNING</center>
</td>
</tr>

<tr>
<td>
<center>INFO</center>
</td>

<td>
<center>INFO</center>
</td>

<td>
<center>INFO</center>
</td>

<td>
<center>INFO</center>
</td>
</tr>

<tr>
<td>
<center>DEBUG</center>
</td>

<td>
<center>DEBUG</center>
</td>

<td>
<center>DEBUG</center>
</td>

<td>
<center>FINEST</center>
</td>
</tr>
</table>
*Not Implemented yet
<p>Clients should normally use the predefined Common Level such as <font face="Courier New,Courier">CommonLevel.FATAL</font>
or <font face="Courier New,Courier">CommonLevel.INFO</font>.
<p>As stated earlier, client code sends log requests to <i>commonLogger</i>
objects. Each <i>commonLogger</i> keeps track of a log level that it is
interested in, and discards log requests that are below this level. In
other words, a logging request is said to be enabled if its log Level is
higher than or equal to the Log Level of its commonLogger. Otherwise, the
request is said to be disabled. By default, a <i>commonLogger</i> is assigned
with the <font face="Courier New,Courier">CommonLevel.DEBUG</font>, the
lowest value allowing the <i>commonLogger</i> to accept any log request.
The Level associated with the <i>commonLogger</i> can be changed with the
setLogLevel method defined in the commonLogger interface.
<p>In addition to specify its Level, a commonLogger may be disabled and
enabled. Disabling a CommonLogger, with the <i><a href="../../htdocs/com/hp/mw/common/util/logging/commonLogger.html#DisableLog()">DisableLog</a></i>
method on the <i><a href="../../htdocs/com/hp/mw/common/util/logging/commonLogger.html">commonLogger</a></i>
interface, means that it any log message is discarded whatever its Level.
Enabling a commonLogger, the <i><a href="../../htdocs/com/hp/mw/common/util/logging/commonLogger.html#EnableLog()">EnableLog</a></i>
method on the commonLogger interface, means that log messages with same
or higher priority are enabled. The method IsEnabled on the commonLogger
interface allows determining if the commonLogger is enabled or not.
<p>Defined Levels are ordered according to their integer values as follows:
<font face="Courier New,Courier">DEBUG
&lt; INFO &lt; WARN &lt; ERROR &lt; FATAL</font>. The following example
illustrates how logging request are enabled or disabled:
<br>&nbsp;
<table BORDER COLS=1 WIDTH="92%" BGCOLOR="#CCCCCC" >
<tr>
<td><font face="Courier New,Courier"><font size=-1>&nbsp; . . .</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; static LoggerFactory
log_fac = LogManager.getLogFactory();</font></font>
<p><font face="Courier New,Courier"><font size=-1>&nbsp; // get a commonLogger
instance named "TestLogLevels"</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; static commonLogger
mylogger = (commonLogger)log_fac.getLogger("TestLogLevels");</font></font>
<p><font face="Courier New,Courier"><font size=-1>&nbsp; // Set the commonLogger
Level to INFO</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; mylogger.setLogLevel(CommonLevel.INFO);</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; // This request
is enabled, because FATAL > INFO</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; mylogger.log(CommonLevel.FATAL,
"This is the first FATAL Message");</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; // This request
is disabled, because DEBUG &lt; INFO</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; mylog.log(CommonLevel.DEBUG,
"This is the first DEBUG Message");</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; // This CommonLogger
is disabled the two next request are disabled</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; mylogger.DisableLog();</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; mylogger.log(CommonLevel.INFO,
"This is the first Info Message");</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; mylogger.log(CommonLevel.FATAL,
"This is the second FATAL Message");</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; /* This CommonLogger
is enabled the two next request are enabled since their values >= INFO
*/</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; mylogger.EnableLog();</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; mylogger.log(CommonLevel.INFO,
"This is the second INFO Message");</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; mylogger.log(CommonLevel.FATAL,
"This is the third FATAL Message");&nbsp;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; . . .</font></font></td>
</tr>
</table>

<br>&nbsp;
<h3>
<a NAME="3.3 Logging Requests"></a>3.3 Logging Requests</h3>
The commonLogger interface provides the log method with a variety of arguments
as described hereafter:
<br>&nbsp;
<table BORDER COLS=1 WIDTH="92%" BGCOLOR="#CCCCCC" >
<tr>
<td><font face="Courier New,Courier"><font size=-1>/** Log a message, with
no arguments if the the commonLogger is enabled for&nbsp;</font></font>
<br><font face="Courier New,Courier"><font size=-1>*&nbsp;&nbsp; the given
message level&nbsp;&nbsp;&nbsp;&nbsp; */</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;void log(Level
level, Object message);</font></font>
<p><font face="Courier New,Courier"><font size=-1>/** Log a throwable arguments
message&nbsp;&nbsp; */</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;void log(Level
level, Throwable throwable);</font></font>
<p><font face="Courier New,Courier"><font size=-1>/** Log a message, with
a throwable arguments&nbsp; */</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;void log(Level
level, Object message, Throwable throwable);</font></font>
<p><font face="Courier New,Courier"><font size=-1>/** Log a message, with
arguments&nbsp; */</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;void log(Level
level, Object message, Object[] params);</font></font>
<p><font face="Courier New,Courier"><font size=-1>/** Log a message, with
arguments and with a throwable arguments&nbsp; */</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;void log(Level
level, Object message, Object[] params, Throwable throwable);</font></font></td>
</tr>
</table>

<p>Rather than calling the log method on the commonLogger interface, for
convenience the Common Logging Framework provides methods associated with
Level. That is rather than to invoke “<font face="Courier New,Courier"><font size=-1>commonLogger.log(CommonLevel.FATAL,
…</font></font>” a programmer will invoke “<font face="Courier New,Courier"><font size=-1>commonLogger.fatal(…</font></font>”.
<br>&nbsp;
<h3>
<a NAME="3.4 Debugging Granularity Extension"></a>3.4 Debugging Granularity
Extension</h3>
The Common Logging Framework provides an extension to filter logging messages
according to finer granularity an application may define. That is, when
a log message is provided to the commonLogger with the DEBUG level, additional
conditions can be specified to determine if the log message is enabled
or not. Note that these conditions are applied if and only the DEBUG level
is enabled and the log request performed by the application specifies debugging
granularity.
<p>When enabled, Debugging is filtered conditionally on three variables:
<ul>
<li>
Debugging level: this is where the log request with the DEBUG Level is
generated from, e.g., constructors or basic methods.</li>

<li>
Visibility level: the visibility of the constructor, method, etc. that
generates the debugging.</li>

<li>
Facility code: for instance the package or sub-module within which debugging
is generated, e.g., the object store.</li>
</ul>
According to these variables the Common Logging Framework defines three
interfaces. A particular product may implement its own classes according
to its own finer granularity.
<br>&nbsp;
<table BORDER COLS=1 WIDTH="82%" BGCOLOR="#CCCCCC" >
<tr>
<td><font face="Courier New,Courier"><font size=-1>public interface <a href="../../htdocs/com/hp/mw/common/util/logging/DebugLevel.html">DebugLevel</a>
{&nbsp;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; /**
return the value of the Debug level.&nbsp;&nbsp;&nbsp; */</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; long
getLevel (String level);</font></font>
<p><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; /**
return the string representation of the Debug level.&nbsp;&nbsp;&nbsp;
*/</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; String
printString (long level);</font></font>
<br><font face="Courier New,Courier"><font size=-1>}</font></font></td>
</tr>
</table>

<br>&nbsp;
<table BORDER COLS=1 WIDTH="82%" BGCOLOR="#CCCCCC" >
<tr>
<td><font face="Courier New,Courier"><font size=-1>public interface <a href="../../htdocs/com/hp/mw/common/util/logging/FacilityCode.html">FacilityCode</a>
{</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; /**
return the value of the facility level. */</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; long
getLevel (String level);</font></font>
<p><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; /**return
the string representation of the facility level. */</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; String
printString (long level);</font></font>
<br><font face="Courier New,Courier"><font size=-1>}</font></font></td>
</tr>
</table>

<br>&nbsp;
<table BORDER COLS=1 WIDTH="82%" BGCOLOR="#CCCCCC" >
<tr>
<td><font face="Courier New,Courier"><font size=-1>public interface <a href="../../htdocs/com/hp/mw/common/util/logging/VisibilityLevel.html">VisibilityLevel</a>{</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; /**
return the value of the visibility level.&nbsp; */</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; long
getLevel (String level);</font></font>
<p><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; /**
return the string representation of the visibility level.&nbsp; */</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; String
printString (long level);</font></font>
<br><font face="Courier New,Courier"><font size=-1>}</font></font></td>
</tr>
</table>

<p>To permit the possibility to associate finer granularity values for
a debug messages, the commonLogger interface provide the following operation:
<blockquote>&nbsp;&nbsp;&nbsp; <font face="Courier New,Courier"><font size=-1>void
debug(Object message, long dl, long vl, long fl);</font></font></blockquote>
The debug message is sent to the output only if the specified debug level
(<font face="Courier New,Courier"><font size=-1>dl</font></font>), visibility
level (<font face="Courier New,Courier"><font size=-1>vl</font></font>),
and facility code (<font face="Courier New,Courier"><font size=-1>fl</font></font>)
match those allowed by the commonLogger. Finer levels assigned to the commonLogger
are initialised at its creation or can be defined dynamically via a set
of operations provided by the commonLogger interface. An application can
specify its own values, however the Common Logging Framework provides default
level values, per finer class, to indicate that no possible debug message
is permitted or all debug messages are permitted.
<br>&nbsp;
<h3>
3.4.1 Common Values</h3>
1. The <i><a href="../../htdocs/com/hp/mw/common/util/logging/CommonDebugLevel.html">CommonDebugLevel</a></i>
class provides the following enumerated types
<br>&nbsp;
<table BORDER COLS=1 WIDTH="89%" BGCOLOR="#CCCCCC" >
<tr>
<td><font face="Courier New,Courier"><font size=-1>public class CommonDebugLevel</font></font>
<br><font face="Courier New,Courier"><font size=-1>{</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long NO_DEBUGGING = 0;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long CONSTRUCTORS = 0x00000001;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long DESTRUCTORS = 0x00000002;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long CONSTRUCT_AND_DESTRUCT = CONSTRUCTORS |&nbsp;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
DESTRUCTORS;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long FUNCTIONS = 0x00000010;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long OPERATORS = 0x00000020;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long FUNCS_AND_OPS = FUNCTIONS | OPERATORS;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long ALL_NON_TRIVIAL = CONSTRUCT_AND_DESTRUCT | FUNCTIONS
| OPERATORS;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long TRIVIAL_FUNCS = 0x00000100;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long TRIVIAL_OPERATORS = 0x00000200;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long ALL_TRIVIAL = TRIVIAL_FUNCS |&nbsp;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
TRIVIAL_OPERATORS;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long FULL_DEBUGGING = 0xffffffff;</font></font>
<br><font face="Courier New,Courier"><font size=-1>}</font></font></td>
</tr>
</table>

<ul>
<li>
<font face="Courier New,Courier">NO_DEBUGGING</font>:&nbsp; No diagnostics.</li>

<br>A commonLogger object assigned with this values discard all debug requests
<li>
<font face="Courier New,Courier">FULL_DEBUGGING</font>: Full diagnostics.</li>

<br>A CommonLogger object assigned with this value allows all debug requests
if the facility code and the visibility level match those allowed by the
commonLogger.</ul>

<ul>Additional Debugging Values are:
<li>
<font face="Courier New,Courier">CONSTRUCTORS</font>: Diagnostics from
constructors.</li>

<li>
<font face="Courier New,Courier">DESTRUCTORS</font>:&nbsp; Diagnostics
from finalizers.</li>

<li>
<font face="Courier New,Courier">CONSTRUCT_AND_DESTRUCT</font>: Diagnostics
from constructors and finalizers.</li>

<li>
<font face="Courier New,Courier">FUNCTIONS</font>:&nbsp; Diagnostics from
functions.</li>

<li>
<font face="Courier New,Courier">OPERATORS</font>:&nbsp; Diagnostics from
operators, such as equals.</li>

<li>
<font face="Courier New,Courier">FUNCS_AND_OPS</font>: Diagnostics from
functions and operations.</li>

<li>
<font face="Courier New,Courier">ALL_NON_TRIVIAL</font>: Diagnostics from
all non-trivial operations.</li>

<li>
<font face="Courier New,Courier">TRIVIAL_FUNCS</font>:&nbsp; Diagnostics
from trivial functions.</li>

<li>
<font face="Courier New,Courier">TRIVIAL_OPERATORS</font>: Diagnostics
from trivial operations, and operators.</li>

<li>
<font face="Courier New,Courier">ALL_TRIVIAL</font>:&nbsp; Diagnostics
from all trivial operations.</li>
</ul>
2. The <i><a href="../../htdocs/com/hp/mw/common/util/logging/CommonFacilityCode.html">CommonFacilityCode</a></i>
class provides two enumerated types as described below:
<br>&nbsp;
<table BORDER COLS=1 WIDTH="77%" BGCOLOR="#CCCCCC" >
<tr>
<td><font face="Courier New,Courier"><font size=-1>public class CommonFacilityCode</font></font>
<br><font face="Courier New,Courier"><font size=-1>{</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long FAC_NONE = 0x00000000;&nbsp;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long FAC_ALL = 0xfffffff;</font></font>
<br><font face="Courier New,Courier"><font size=-1>}</font></font></td>
</tr>
</table>

<ul>
<li>
FAC_NONE:&nbsp; No Diagnostic</li>

<br>A commonLogger object assigned with this values discard all debug requests
<li>
FAC_ALL:&nbsp; Full Diagnostic</li>

<br>A commonLogger object assigned with this value allows all debug requests
if the debug level and the visibility level match those allowed by the
commonLogger.</ul>

<p><br>3. The <i><a href="../../htdocs/com/hp/mw/common/util/logging/CommonVisibilityLevel.html">CommonVisibilityCode</a></i>
class provides two enumerated types as described below:
<br>&nbsp;
<table BORDER COLS=1 WIDTH="77%" BGCOLOR="#CCCCCC" >
<tr>
<td><font face="Courier New,Courier"><font size=-1>public class CommonVisibilityLevel</font></font>
<br><font face="Courier New,Courier"><font size=-1>{</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long VIS_NONE = 0x00000000;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long VIS_PRIVATE = 0x00000001;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long VIS_PROTECTED = 0x00000002;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long VIS_PUBLIC = 0x00000004;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long VIS_PACKAGE = 0x00000008;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; public
static final long VIS_ALL = 0xffffffff;</font></font>
<br><font face="Courier New,Courier"><font size=-1>}</font></font></td>
</tr>
</table>

<ul>
<li>
VIS_NONE:&nbsp; No Diagnostic</li>

<li>
VIS_PRIVATE :&nbsp; only from private methods.</li>

<li>
VIS_PROTECTED&nbsp; only from protected methods.</li>

<li>
VIS_PUBLIC&nbsp;&nbsp; only from public methods.</li>

<li>
VIS_PACKAGE&nbsp;&nbsp; only from package methods.</li>

<li>
VIS_ALL:&nbsp; Full Diagnostic</li>
</ul>
A commonLogger object assigned with this value allows all debug requests
if the debug level and the facility code match those allowed by the commonLogger.
<p>Once enabled, logging requests with DEBUG Level can be controller by
setting the property variables DEBUG_LEVEL, VIS_LEVEL and FAC_LEVEL appropriately.
<br>&nbsp;
<h3>
3.4.2 Defining its own finer debugging classes</h3>
For each type of variable an application may define its own class providing
its own enumerated values, which shall differ those described above - In
other words different from 0x00000000 or 0xffffffff. However, to avoid
any confusion between finer values, the application should take benefit
from the bit representation by defining its values as follow.
<blockquote><font face="Courier New,Courier"><font size=-1>Level_1 = 0x00000001</font></font>
<br><font face="Courier New,Courier"><font size=-1>Level_2 = 0x00000002</font></font>
<br><font face="Courier New,Courier"><font size=-1>. . .</font></font>
<br><font face="Courier New,Courier"><font size=-1>public class MyDebugValues</font></font>
<br><font face="Courier New,Courier"><font size=-1>public static final
long</font></font></blockquote>
Since each debugging level is represented by a single bit in the controller,
debugging of multiple levels can be produced by OR-ing together the fields.
For instance a new value can be defined as follow:
<blockquote><font face="Courier New,Courier"><font size=-1>Level_3 = Level_1
| Level_2</font></font></blockquote>
If for instance, a CommonLogger object is assigned the Level_3, it enables
a debug message only if the debug request is provided either with <font face="Courier New,Courier"><font size=-1>Level_3
or with Level_1 | Level_2</font></font>.
<p>As a template the following example illustrates how to build its own
debugging classes providing a finer granularity.
<br>&nbsp;
<br>&nbsp;
<table BORDER COLS=1 WIDTH="74%" BGCOLOR="#CCCCCC" >
<tr>
<td><font face="Courier New,Courier"><font size=-1>import com.hp.mw.common.util.logging.DebugLevel;</font></font>
<br><font face="Courier New,Courier"><font size=-1>import com.hp.mw.common.util.logging.CommonDebugLevel;</font></font>
<p><font face="Courier New,Courier"><font size=-1>public class MyDebugLevel
implements DebugLevel</font></font>
<br><font face="Courier New,Courier"><font size=-1>{</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; public static
final long DEBUG_LEVEL_1 = 0x00000001;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; public static
final long DEBUG_LEVEL_2 = 0x00000002;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; public static
final long DEBUG_LEVEL_3 = 0x00000004</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; . . .&nbsp;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; public final
long getLevel (String level)</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; {</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;if (level.equals("N0_DEBUGGING"))</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;
return CommonDebugLevel.NO_DEBUGGING;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;if (level.equals("DEBUG_LEVEL_1"))</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;
return DEBUG_LEVEL_1;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;if (level.equals("DEBUG_LEVEL_2"))</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;
return DEBUG_LEVEL_2;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;. . .&nbsp;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;if (level.equals("FULL_DEBUGGING"))</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;
return CommonDebugLevel.FULL_DEBUGGING;</font></font>
<p><font face="Courier New,Courier"><font size=-1>&nbsp;return CommonDebugLevel.NO_DEBUGGING;
//Default</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; }</font></font>
<p><font face="Courier New,Courier"><font size=-1>&nbsp; public final String
printString (long level)</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; {</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;if (level == CommonDebugLevel.NO_DEBUGGING)</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;
return "NO_DEBUGGING";</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;if (level == CommonDebugLevel.FULL_DEBUGGING)</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;
return "FULL_DEBUGGING";</font></font>
<p><font face="Courier New,Courier"><font size=-1>&nbsp;String sLevel =
null;</font></font>
<p><font face="Courier New,Courier"><font size=-1>&nbsp; if ((level &amp;
DEBUG_LEVEL_1) != 0)</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
sLevel = ((sLevel == null) ? "DEBUG_LEVEL_1" : " &amp; DEBUG_LEVEL_1");</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; if ((level &amp;
DEBUG_LEVEL_2) != 0)</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
sLevel = ((sLevel == null) ? "DEBUG_LEVEL_2" : " &amp; DEBUG_LEVEL_2");</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; . . .&nbsp;</font></font>
<p><font face="Courier New,Courier"><font size=-1>&nbsp; return ((sLevel
== null) ? "NO_DEBUGGING" : sLevel);</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; }</font></font>
<br><font face="Courier New,Courier"><font size=-1>}</font></font></td>
</tr>
</table>

<p>In a similar way the application may define its own classes implementing
the classes FacilityCode and VisibilityLevel.
<h3>
3.4.3 commonLogger Debugging Values</h3>
Finer debugging values are assigned to a commonLogger object dynamically
through the following methods on the commonLogger interface:
<br>&nbsp;
<table BORDER COLS=1 WIDTH="76%" BGCOLOR="#CCCCCC" >
<tr>
<td><font face="Courier New,Courier"><font size=-1>public interface CommonLogger&nbsp;
extends Handler {</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; .
. .</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; //
All Level</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; void
setLevels (long dl, long vl, long fl);</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; //
Debug Level</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; long
getDebugLevel ();</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; void
setDebugLevel (long level);&nbsp;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; void
mergeDebugLevel (long level);</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; //
Visibility Level</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; long
getVisibilityLevel ();</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; void
setVisibilityLevel (long level);</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; void
mergeVisibilityLevel (long level);</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; //
FacilityCode Levels</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; long
getFacilityCode ();</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; void
setFacilityCode (long level);</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; void
mergeFacilityCode (long level);</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp; ....</font></font>
<br><font face="Courier New,Courier"><font size=-1>}</font></font></td>
</tr>
</table>

<ul>
<li>
<font face="Courier New,Courier"><font size=-1>getXXX</font></font> methods
are used to obtain the current level assigned to a CommonLogger object.</li>

<li>
<font face="Courier New,Courier"><font size=-1>setXXX</font></font> methods
are used to set the level of a CommonLogger object</li>

<li>
<font face="Courier New,Courier"><font size=-1>mergeXXX</font></font> methods
are used to add a level value to&nbsp; CommonLogger.</li>
</ul>

<h3>
3.4.4 A simple scenario</h3>
The following example illustrates how finer granularity extension is used
when the DEBUG is enabled by the commonLogger. The application provides
its own finer classes. We assume that the default finer values used to
initialize the commonLogger are defined a <a href="#6.">configuration file.</a>
<br>&nbsp;
<table BORDER COLS=1 WIDTH="76%" BGCOLOR="#CCCCCC" >
<tr>
<td><font face="Courier New,Courier"><font size=-1>import com.hp.mw.common.util.logging.CommonLevel;</font></font>
<br><font face="Courier New,Courier"><font size=-1>import com.hp.mw.common.util.logging.commonLogger;</font></font>
<br><font face="Courier New,Courier"><font size=-1>import com.hp.mw.common.util.logging.LoggerFactory;</font></font>
<br><font face="Courier New,Courier"><font size=-1>import com.hp.mw.common.util.logging.LogManager;</font></font>
<br><font face="Courier New,Courier"><font size=-1>import com.hp.mw.common.util.logging.Level;</font></font>
<br><font face="Courier New,Courier"><font size=-1>import com.hp.mw.common.util.logging.CommonDebugLevel;</font></font>
<p><font face="Courier New,Courier"><font size=-1>public class DebugExt{</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;static LoggerFactory
log_fac = LogManager.getLogFactory();</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;static commonLogger
mylog = (commonLogger)log_fac.getLogger("TestLogLevels");</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;public static
void main(String[] args) {</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; mylog.debug("This
is a DEBUG Message");</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; mylog.debug("This
debug message is enabled since it matches default&nbsp;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Finer Values", MyDebugLevel.DEBUG_LEVEL_1,&nbsp;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
MyVisibilityLevel.VIS_LEVEL_1, MyFacilityCode.LEVEL_1);</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; mylog.debug("This
debug message is discarded since it does'nt match&nbsp;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
default Finer Values", MyDebugLevel.DEBUG_LEVEL_2,&nbsp;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
MyVisibilityLevel.VIS_LEVEL_1, MyFacilityCode.FAC_LEVEL_1);</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; mylog.mergeDebugLevel(CommonDebugLevel.FULL_DEBUGGING);</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp; mylog.debug("This
debug message is enabled since it the CommonLogger allows&nbsp;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
full debugging", MyDebugLevel.DEBUG_LEVEL_3,&nbsp;</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
MyVisibilityLevel.VIS_LEVEL_1, MyFacilityCode.FAC_LEVEL_1);</font></font>
<p><font face="Courier New,Courier"><font size=-1>&nbsp;}</font></font>
<br><font face="Courier New,Courier"><font size=-1>}</font></font></td>
</tr>
</table>

<p><a href="../Arjuna_CLF_main.html">Main</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<a href="../trail2/Installation.html">Previous</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<a href="../trail4/Handler and Output Format.html">Next</a>
</body>
</html>
